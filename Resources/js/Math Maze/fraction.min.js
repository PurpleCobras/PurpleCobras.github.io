"use strict";var Fraction=function(t,r){if("undefined"!=typeof t&&r)"number"==typeof t&&"number"==typeof r?(this.numerator=t,this.denominator=r):"string"==typeof t&&"string"==typeof r&&(this.numerator=parseInt(t),this.denominator=parseInt(r));else if("undefined"==typeof r){var n=t;if("number"==typeof n)this.numerator=n,this.denominator=1;else if("string"==typeof n){var o,e,i=n.split(" ");if(i[0]&&(o=i[0]),i[1]&&(e=i[1]),o%1===0&&e&&e.match("/"))return new Fraction(o).add(new Fraction(e));if(!o||e)return;if("string"==typeof o&&o.match("/")){var a=o.split("/");this.numerator=a[0],this.denominator=a[1]}else{if("string"==typeof o&&o.match("."))return new Fraction(parseFloat(o));this.numerator=parseInt(o),this.denominator=1}}}this.normalize()};Fraction.prototype.clone=function(){return new Fraction(this.numerator,this.denominator)},Fraction.prototype.toString=function(){if(isNaN(this.denominator))return"NaN";var t="";this.numerator<0!=this.denominator<0&&(t="-");var r=Math.abs(this.numerator),n=Math.abs(this.denominator),o=Math.floor(r/n);return r%=n,0!=o&&(t+=o),0!=r&&(0!=o&&(t+=" "),t+=r+"/"+n),t.length>0?t:"0"},Fraction.prototype.toTeX=function(t){if(isNaN(this.denominator))return"NaN";var r="";this.numerator<0!=this.denominator<0&&(r="-");var n=Math.abs(this.numerator),o=Math.abs(this.denominator);if(!t)return 1===o?r+n:r+"\\frac{"+n+"}{"+o+"}";var e=Math.floor(n/o);return n%=o,0!=e&&(r+=e),0!=n&&(r+="\\frac{"+n+"}{"+o+"}"),r.length>0?r:"0"},Fraction.prototype.rescale=function(t){return this.numerator*=t,this.denominator*=t,this},Fraction.prototype.add=function(t){var r=this.clone();t=t instanceof Fraction?t.clone():new Fraction(t);var n=r.denominator;return r.rescale(t.denominator),r.numerator+=t.numerator*n,r.normalize()},Fraction.prototype.subtract=function(t){var r=this.clone();t=t instanceof Fraction?t.clone():new Fraction(t);var n=r.denominator;return r.rescale(t.denominator),r.numerator-=t.numerator*n,r.normalize()},Fraction.prototype.multiply=function(t){var r=this.clone();if(t instanceof Fraction)r.numerator*=t.numerator,r.denominator*=t.denominator;else{if("number"!=typeof t)return r.multiply(new Fraction(t));r.numerator*=t}return r.normalize()},Fraction.prototype.divide=function(t){var r=this.clone();if(t instanceof Fraction)r.numerator*=t.denominator,r.denominator*=t.numerator;else{if("number"!=typeof t)return r.divide(new Fraction(t));r.denominator*=t}return r.normalize()},Fraction.prototype.equals=function(t){t instanceof Fraction||(t=new Fraction(t));var r=this.clone().normalize(),t=t.clone().normalize();return r.numerator===t.numerator&&r.denominator===t.denominator},Fraction.prototype.normalize=function(){var t=function(t){return"number"==typeof t&&(t>0&&t%1>0&&1>t%1||0>t&&0>t%-1&&t%-1>-1)},r=function(t,r){if(r){var n=Math.pow(10,r);return Math.round(t*n)/n}return Math.round(t)};return function(){if(t(this.denominator)){var n=r(this.denominator,9),o=Math.pow(10,n.toString().split(".")[1].length);this.denominator=Math.round(this.denominator*o),this.numerator*=o}if(t(this.numerator)){var n=r(this.numerator,9),o=Math.pow(10,n.toString().split(".")[1].length);this.numerator=Math.round(this.numerator*o),this.denominator*=o}var e=Fraction.gcf(this.numerator,this.denominator);return this.numerator/=e,this.denominator/=e,this.denominator<0&&(this.numerator*=-1,this.denominator*=-1),this}}(),Fraction.gcf=function(t,r){if(arguments.length<2)return t;var n;for(t=Math.abs(t),r=Math.abs(r);r;)n=t%r,t=r,r=n;return t},Fraction.primeFactors=function(t){for(var r=Math.abs(t),n=[],o=2;r>=o*o;)r%o===0?(n.push(o),r/=o):o++;return 1!=r&&n.push(r),n},Fraction.prototype.snap=function(t,r){r||(r=1e-4),t||(t=100);for(var n=this.numerator<0,o=this.numerator/this.denominator,e=Math.abs(o%1),i=n?Math.ceil(o):Math.floor(o),a=1;t>=a;++a)for(var s=0;t>=s;++s){var u=Math.abs(s/a);if(Math.abs(u-e)<r)return new Fraction(i*a+s*(n?-1:1),a)}return new Fraction(this.numerator,this.denominator)};